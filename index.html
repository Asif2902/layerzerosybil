<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TapSwap</title>
    <link rel="stylesheet" href="styles/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js" defer></script>
    <script
    src="https://cdn.jsdelivr.net/npm/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <script
    src="https://cdn.jsdelivr.net/npm/@tonconnect/sdk@latest/dist/tonconnect.min.js"></script>
</head>
<body>
    <div id="app">
        <h1 id="title">TapSwap <i class="fas fa-check-circle"></i></h1>
        <div id="user-info">
            <div id="user-balance">
                <img src="assets/logo.png" alt="Coin Logo" id="coin-logo">
                <span id="balance">0</span>
            </div>
            <button id="connect-ton-wallet">Connect Wallet</button>
        </div>
        <div id="energy-section">
            <span id="energy">500/500 âš¡</span>
            <div id="energy-refuel-timer">Energy refuels needs 10m 0s</div>
        </div>
        <div id="earn-section">
            <img id="coin" src="assets/logo.png" alt="Coin">
        </div>
        <div id="tasks-section" style="display:none;">
            <button id="follow-twitter-task" class="task-button">
                <i class="fab fa-twitter"></i> Follow Twitter
            </button>
            <button id="join-telegram-task" class="task-button">
                <i class="fab fa-telegram-plane"></i> Join Telegram
            </button>
        </div>
        <div id="nav-bar">
            <button class="nav-button" id="earn-tab">
                <i class="fas fa-coins"></i> Earn
            </button>
            <button class="nav-button" id="tasks-tab">
                <i class="fas fa-tasks"></i> Tasks
            </button>
            <button class="nav-button" id="account-tab">
                <i class="fas fa-user"></i> Account
            </button>
        </div>
    </div>

    <script>
        // Initialize TonConnect
        const tonConnect = new TonConnect();
        const tonConnectUI = new TonConnectUI(tonConnect, {
            bridgeUrl: 'https://bridge.tonconnect.dev',  // Bridge URL for handling connections
            manifestUrl: 'https://layerzerosybil.vercel.app/tonconnect-manifest.json'  // URL to your manifest
        });

        // Function to connect TON Wallet
        async function connectTonWallet() {
            try {
                // Opens the TON Connect UI for wallet selection
                const selectedWallet = await tonConnectUI.connectWallet();

                // If a wallet is selected, show the address
                if (selectedWallet) {
                    const address = selectedWallet.account.address;
                    document.getElementById('connect-ton-wallet').textContent = address;
                    alert("Connected to TON Wallet: " + address);
                } else {
                    alert("No wallet selected");
                }
            } catch (error) {
                console.error("Error connecting to TON Wallet:", error);
                alert("Error connecting to TON Wallet. Check console for details.");
            }
        }

        // Add event listener for the "Connect Wallet" button
        document.getElementById('connect-ton-wallet').addEventListener('click', connectTonWallet);
    </script>
</body>
</html>
